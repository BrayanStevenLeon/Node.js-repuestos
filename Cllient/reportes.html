<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <meta http-equiv="Cache-Control" content="no-store" />
    <title>Document</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" 
    integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg==" 
    crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="reportes.css">
     <style>
    /* Oculta todo el contenido hasta que validemos sesi칩n */
      body { visibility: hidden; }
     </style>
</head>
<body>
    <header class="vertical-menu">
        <img src="./imagenes/logo1.png" alt="Logo tienda autorrepuestos" />
        <nav>
          <ul>
            <li><a href="dashboard.html" id="menuUsuarios">Usuarios</a></li>
            <li><a href="inventory.html"></i>Productos</a></li>
            <li><a href="ventas.html">Ventas</a></li>
            <li><a href="reportes.html">Reportes</a></li>
          </ul>
        </nav>
        <button id="logoutButton"><i class="fa-solid fa-right-from-bracket"></i></button>
      </header>
      <div class="main-content">
        <div class="nombreUsuario">
          <h2>Bienvenido, <span id="nombreUsuario"></span></h2>
          <p>Rol: <span id="rolUsuario"></span></p>
      </div>
      <hr class="divider" />
      <div class="reporte-contenedor" id="reporte-contenedor">
        <label for="tipoReporte">Generar un reporte</label>
        <div class="reporte-controles">
          <select id="tipoReporte">
            <option value="usuarios">Usuarios</option>
            <option value="productos">Productos</option>
            <option value="ventas">Ventas</option>
          </select>
          <button id="btnGenerarReporte">Generar</button>
          <button onclick="abrirHistorialReportes()">游늬 Ver historial de reportes</button>
        </div>
      </div>      
      <div id="modalHistorial" style="display: none;">
        <div class="modal-contenido">
          <h2 id="HistoriaRep">Historial de Reportes</h2>
          <table id="tablaHistorial">
            <thead>
              <tr>
                <th>ID</th>
                <th>Tipo</th>
                <th>Fecha</th>
                <th>Acciones</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
          <button onclick="cerrarModal()" id="botonCerrar">Cerrar</button>
        </div>
      </div>
      
      <div id="resumenEstadisticas" style="display: flex; gap: 20px; margin-top: 20px;">
        <div class="tarjeta-resumen" id="resumenVentas">
          <h3>Ventas</h3>
          <p class="valor">0</p>
        </div>
        <div class="tarjeta-resumen" id="resumenUsuarios">
          <h3>Usuarios</h3>
          <p class="valor">0</p>
        </div>
        <div class="tarjeta-resumen" id="resumenProductos">
          <h3>Productos</h3>
          <p class="valor">0</p>
        </div>
      </div>   
      <h2 style="margin-top: 40px; margin-bottom: 20px;">Reportes de Ventas</h2>

      <div style="display: flex; justify-content: space-between; flex-wrap: wrap; gap: 20px;"> 
        
        <!-- Gr치fica de ventas por d칤a -->
        <div style="flex: 1 1 48%; background: #fff; padding: 10px; border-radius: 8px; box-shadow: 0px 2px 5px rgba(0,0,0,0.1);">
          <h3 style="text-align: center;">Ventas en los 칰ltimos 7 d칤as</h3>
          <canvas id="graficaVentasDia"></canvas>
        </div>
      
        <!-- Gr치fica de productos m치s vendidos -->
        <div style="flex: 1 1 48%; background: #fff; padding: 10px; border-radius: 8px; box-shadow: 0px 2px 5px rgba(0,0,0,0.1);">
          <h3 style="text-align: center;">Productos m치s vendidos</h3>
          <canvas id="graficaProductos"></canvas>
        </div>
      </div>
      
        <div style="display: flex; justify-content: space-between; flex-wrap: wrap; gap: 20px;">
        <div style="background-color: white; border-radius: 10px; padding: 20px; margin-top: 20px; box-shadow: 0px 2px 5px rgba(0,0,0,0.1); max-width: 600px;">
          <h3 style="text-align: center; margin-bottom: 10px;">Ventas por tipo de producto</h3>
          <canvas id="graficaCategorias" width="400" height="200"></canvas>
        </div>
        <div style="background-color: white; border-radius: 10px; padding: 20px; margin-top: 20px; box-shadow: 0px 2px 5px rgba(0,0,0,0.1); max-width: 600px;">
          <h3 style="margin-top: 0px;">Estado de pedidos (칰ltimos 7 d칤as)</h3>
          <canvas id="graficaEstadosPedidos" width="520" height="350"></canvas>
        </div>
        </div>
        <div id="logs-container" class="logs-feed"></div>
      
</body>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="./js/reportes.js"></script>
</html>
  